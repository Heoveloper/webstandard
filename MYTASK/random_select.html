<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Random</title>
    <style>
      #btnResult {
        background-color: orange;
        border: none;
        border-radius: 5px;
        font-weight: bold;
        width: 95px;
        height: 25px;
        cursor: pointer;
      }
      #btnAgain {
        background-color: orange;
        border: none;
        border-radius: 5px;
        font-weight: bold;
        width: 95px;
        height: 25px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <fieldset>
      <legend>사칙연산 선택</legend>
        <select name="calc" id="calc">
          <option value="">사칙연산</option>
          <option value="+" id="plus">덧셈</option>
          <option value="-" id="minus">뺄셈</option>
          <option value="*" id="multiplication">곱셈</option>
          <option value="/" id="division">나눗셈</option>
        </select>
      </select>
    </fieldset>

    <input type="text" id="num1" /><span id="span">+</span
    ><input type="text" id="num2" />=<input type="text" id="answer" />
    <button id="btnResult">결과확인</button>
    <button id="btnAgain">다시풀기</button>

    <script>

      const $calc = document.getElementById('calc');
      $calc.addEventListener('change', funcCalc_t);
      const $span = document.getElementById("span");

      function funcCalc_t(evt) {
        console.log(evt.target.value);
        $span.innerText = evt.target.value;
        document.getElementById("answer").value = null;
        document.getElementById("answer").style.backgroundColor = "white";
      }

      //난수 2개 생성
      const random1 = Math.floor(Math.random() * 1000) + 1;
      const random2 = Math.floor(Math.random() * 1000) + 1;

      //난수박스 선택
      const $num1 = document.getElementById("num1");
      const $num2 = document.getElementById("num2");

      //난수박스에 값 집어넣기
      if(random1 > random2) {
        $num1.value = random1;
        $num2.value = random2;
      } else {
        $num1.value = random2;
        $num2.value = random1;
      }

      //결과확인버튼 선택
      const $btnResult = document.getElementById("btnResult");

      //결과확인버튼 클릭시 이벤트
      $btnResult.addEventListener("click", funcResult);

      //결과함수
      function funcResult(evt) {
        const $answer = document.getElementById("answer");
        if ($answer.value == "") {
          console.log("답안을 먼저 작성해주세요.");
        } else if ($span.innerText == '-') {
          console.log("-결과확인버튼이 클릭되었습니다.");
          const minusResult = parseInt($num1.value) - parseInt($num2.value);
          console.log(`결과는 ${minusResult} 입니다`);

          if (minusResult == $answer.value) {
            console.log("일치");
            document.getElementById("answer").style.backgroundColor =
              "yellowgreen";
          } else {
            console.log("불일치");
            document.getElementById("answer").style.backgroundColor = "red";
          }
        } else if ($span.innerText == '*') {
          console.log("결과확인버튼이 클릭되었습니다.");
          const multiplicationResult = parseInt($num1.value) * parseInt($num2.value);
          console.log(`결과는 ${multiplicationResult} 입니다`);

          if (multiplicationResult == $answer.value) {
            console.log("일치");
            document.getElementById("answer").style.backgroundColor =
              "yellowgreen";
          } else {
            console.log("불일치");
            document.getElementById("answer").style.backgroundColor = "red";
          }
        } else if ($span.innerText == '/') {
          console.log("결과확인버튼이 클릭되었습니다.");
          const divisionResult = (parseInt($num1.value) / parseInt($num2.value)).toFixed(2);
          console.log(`결과는 ${divisionResult} 입니다`);

          if (divisionResult == $answer.value) {
            console.log("일치");
            document.getElementById("answer").style.backgroundColor =
              "yellowgreen";
          } else {
            console.log("불일치");
            document.getElementById("answer").style.backgroundColor = "red";
          }
        } else {
          console.log("결과확인버튼이 클릭되었습니다.");
          const plusResult = parseInt($num1.value) + parseInt($num2.value);
          console.log(`결과는 ${plusResult} 입니다`);

          if (plusResult == $answer.value) {
            console.log("일치");
            document.getElementById("answer").style.backgroundColor =
              "yellowgreen";
          } else {
            console.log("불일치");
            document.getElementById("answer").style.backgroundColor = "red";
          }
        }
      }

      //다시풀기버튼 선택
      const $btnAgain = document.getElementById("btnAgain");

      //다시풀기버튼 클릭시 이벤트
      $btnAgain.addEventListener("click", funcAgain);

      //다시함수
      function funcAgain(evt) {
        console.log("다시풀기버튼이 클릭되었습니다.");
        const $answer = document.getElementById("answer");
        const random1 = Math.floor(Math.random() * 1000) + 1;
        const random2 = Math.floor(Math.random() * 1000) + 1;
        $num1.value = random1;
        $num2.value = random2;
        $answer.value = null;
        $answer.style.backgroundColor = "white";

        if(random1 > random2) {
        $num1.value = random1;
        $num2.value = random2;
      } else {
        $num1.value = random2;
        $num2.value = random1;
      }
      }
    </script>
  </body>
</html>
