<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event5</title>
    <style>
        ul, li{margin:0; padding:0; list-style: none;}
        fieldset {
            display: inline;
        }
        button {
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div id="container">
        <fieldset>
            <legend>취미</legend>
            <ul class="hobby">
                <div class="select-all">
                    <input type="checkbox" name="" id="allChk"><span>전체 선택</span>
                </div>
                <li class="hobby__item">
                    <input type="checkbox" name="hobby" id="" value="취미1"><span>취미1</span>
                </li>
                <li class="hobby__item">
                    <input type="checkbox" name="hobby" id="" value="취미2"><span>취미2</span>
                </li>
                <li class="hobby__item">
                    <input type="checkbox" name="hobby" id="" value="취미3"><span>취미3</span>
                </li>
            </ul>
        </fieldset>
        <div class="btngrp"><button class="btn btn__del">삭제</button></div>
        <div id="msg">삭제할 항목을 선택 후 삭제 버튼 클릭</div>
    </div>

    <script>
        //이벤트 핸들러
        //1) 전체선택
        const allChkClick_h = e => {
            const $hobbies = document.querySelectorAll('.hobby__item input[type=checkbox]');
            $hobbies.forEach($hobby=>$hobby.checked = e.target.checked ? true : false);
        }
        //2) 삭제
        const btnDel_h = e => {
            console.log('삭제버튼 클릭됨!');
            const $hobbies = document.querySelectorAll('.hobby__item input[type=checkbox]');
            const answer = confirm('삭제할래?');
            
            //case1)
            if(answer) {
                const $hobbies = document.querySelectorAll('.hobby__item input[type=checkbox]');
                let str = '';
                let countOfUncheckedInput = 0;
                $hobbies.forEach($hobby=>{
                    if($hobby.checked) {
                        console.log($hobby.value);
                        str += `${$hobby.value}, `;
                        ++countOfUncheckedInput;
                    }
                });
                if (countOfUncheckedInput != 0) {
                    str = str.substring(0, str.length-2);
                    str = `${str} 을(를) 삭제했습니다.`;
                } else {
                    str = '삭제대상이 없습니다.';
                }
                document.getElementById('msg').textContent = str;
            }

            //case2)
            // //체크된 요소(취미)만 걸러서 배열에 담기
            // const $filteredArr = [...$hobbies].filter($hobby=>$hobby.checked);
            // //체크된 요소가 없으면
            // if(!$filteredArr.length) {
            //     window.alert('삭제 대상이 없네...')
            //     return;
            // } else {
            //     //체크된 요소가 있으면
            //     let str = '';
            //     $filteredArr.forEach($hobby=>{
            //         str += `${$hobby.value}, `;
            //     });
            //     str = str.substring(0, str.length-2);
            //     str = `${str} 을(를) 삭제하였습니다.`;
            //     document.getElementById('msg').textContent = str;
            // }
        }

        //이벤트 등록
        //1) 전체선택 버튼
        document.getElementById('allChk')
        .addEventListener('click', allChkClick_h);
        //2) 삭제 버튼
        document.querySelector('.btn.btn__del').
        addEventListener('click', btnDel_h);
    </script>
</body>
</html>